Quickstart
==========

Overview
--------

This is a RESTful and asynchronous (created via
`iyazerski/cookiecutter-api`_) weather API, created as a pet project
to demonstrate my skills in API development.

Requirements
------------

Please visit openweathermap.org and sign in to receive an API key.

Docker
~~~~~~

Normally, to build project image you will need to install following
packages:

-  `Docker`_ and `docker-compose`_

-  `pydeployhelp`_

Installation
------------

Linux \| Windows \| macOS
~~~~~~~~~~~~~~~~~~~~~~~~~

Following instructions are guidelines, you can install it differently,
however, executing the following commands will ensure that
``weather_api`` is installed correctly:

Clone repository and create `virtual environment`_:

.. code:: console

   foo@bar:~$ git clone https://github.com/iyazerski/weather_api && cd weather_api
   foo@bar:~/weather_api$ python -m venv venv && source venv/bin/activate
   foo@bar:~/weather_api$ python -m pip install --upgrade pip wheel setuptools

Install requirements:

.. code:: console

   foo@bar:~/weather_api$ pip install -r requirements.txt

.. _docker-1:

Docker
~~~~~~

Make sure that you have execution permissions for ``docker``,
``docker-compose`` and ``python``.

Use ``pydeployhelp`` package to build project image:

.. code:: console

   foo@bar:~/weather_api$ pydeployhelp
   Enter deploy tasks from following: all | build up down: build
           ✓ processing deploy tasks: build
   Enter deploy targets from following: all | weatherapi-backend-dev: all
           ✓ processing deploy targets: weatherapi-backend-dev
   Do you agree to start processing (y/N)?: y

Usage
-----

Create ``.env`` file with following variables:

.. code:: text

   # deploy
   ENV=dev
   PROJECT_SLUG=weatherapi
   VOLUMES_ROOT=/$HOME/projects/weather_api

   # api
   HOST=localhost
   PORT=8888
   ENABLE_CORS=True

   # business logic
   API_KEY=key from openweathermap.org

.. _linux-windows-macos-1:

Linux \| Windows \| macOS
~~~~~~~~~~~~~~~~~~~~~~~~~

You can manually start project:

.. code:: console

   foo@bar:~/weather_api$ uvicorn run:server --port 8000 --host 0.0.0.0

.. _docker-2:

Docker
~~~~~~

Use ``pydeployhelp`` package to run project image:

.. code:: console

   foo@bar:~/weather_api$ pydeployhelp
   Enter deploy tasks from following: all | build up down: up
           ✓ processing deploy tasks: up
   Enter deploy targets from following: all | weatherapi-backend-dev: all
           ✓ processing deploy targets: weatherapi-backend-dev
   Do you agree to start processing (y/N)?: y

Documentation
-------------

weather_api is equipped with automatic documentation (via ``sphinx``),
which can be generated from ``docs`` directory as follows:

.. code:: console

   foo@bar:~/weather_api$ cd docs
   foo@bar:~/weather_api/docs$ make html

After executing this command you will find autogenerated documentation
entrypoint at ``docs/build/html/index.html``

.. _iyazerski/cookiecutter-api: https://github.com/iyazerski/cookiecutter-api
.. _Docker: https://docs.docker.com/get-docker/
.. _docker-compose: https://docs.docker.com/compose/install/
.. _pydeployhelp: https://pypi.org/project/pydeployhelp/
.. _virtual environment: https://docs.python.org/3/library/venv.html